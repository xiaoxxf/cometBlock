<!DOCTYPE html>

<html>
<head>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>播报</title>
	<link rel="stylesheet" media="all" href="./css/bootstrap.min.css">
	<link rel="stylesheet" href="css/loading.css">
	<link rel="stylesheet" href="css/detail.css">
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/chain.css">
	<link type="favicon" rel="shortcut icon" href="favicon.ico" />
	<!-- 导航栏 -->
</head>
<style>

	@media (max-width: 767px){
		.top-nav-xs {
			display: block!important;
			padding: 20px 20px;
		}
		.top-nav-xs .title{
			width: 100%;
			margin-bottom: 10px;
		}
		.coin-item span{
			margin-right: 0px;
		}
	}
</style>
<body lang="zh-CN" class="reader-black-font">
<div class="comet-main">
	<!-- 全局顶部导航栏 -->
	<div class="navbar-fixed-container">
		<div class="navbar navbar-inverse navbar-fixed-top affix-top comet-navbar" data-spy="affix" data-offset-top="1">
			<nav role="navigation">
				<div class="container collapsed">
					<div class="nav navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse"
								data-target=".navbar-collapse" aria-label="Expand and Collapse Menu">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="index.html"><span itemprop="name">彗星</span></a>
					</div>
					<div class="navbar-collapse collapse" aria-expanded="false" style="height: 0px;">
						<ul class="nav navbar-nav navbar-left">
							<li><a  href="index.html">播报</a></li>
							<!--<li><a  href="chain.html">链库</a></li>-->
							<li><a  href="chain.html" class="cur-nav">链库</a></li>
						</ul>
						<!-- <ul class="nav navbar-nav navbar-right nav-index-img">
                             <li>
                                 <a class="link-button" href="http://www.huixing.io/feeds" id="nav-download">
                                     <img class="download-icon" src="img/temp1.jpg" width="30px" height="30px"
                                          alt="Download VS Code">
                                 </a>
                             </li>
                         </ul>-->
						<ul class="nav navbar-nav navbar-right">
							<li>
								<div class="nav_search">
									<input class="nav_input" type="text" placeholder="输入关键词搜索" value="" id="head_search"
										   onkeyup="test()">
									<a class="nav_search_icon">
									</a>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
	</div>
	<div class="mian-container">
		<div class="container" >
			<div class="row">
				<div class="top-nav-wrap top-nav-xs">
					<div class="title">找项目</div>
					<div class="content">
						<div class="search">
							<div class="search-wrap">
								<input type="text" class="search_bar" placeholder="搜索币种/简称">
								<span class="search-icon search-click-hook"></span>
							</div>
						</div>
						<div class="coin-item">
							<span class="cur">上新</span>
							<span>数字货币</span>
							<span>数字货币</span>
							<span>数字货币</span>
							<span>数字货币</span>
							<span>数字货币</span>
							<span>数字货币</span>
						</div>
					</div>
				</div>
			</div>

			<div class="row coin-content">
				<ul class="coin-list-wrap">

				</ul>
			</div>

			<!-- 搜索结果 -->
			<div class="search-result-box">

			</div>


			<!-- 没有搜索结果 -->
			<div class="no-result" style="display:none">
				<div class="row no-data" >
					<div class="">
						找不到"BTC"项目
					</div>
				</div>

				<div class="row create-coin">
					<div class="">
						<a href="#">新建币种</a>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="load-more-wrap">
					<div class="loader1 loader">
						<div></div>
						<div></div>
						<div></div>
					</div>
					<div class="loading-more">
						加载更多
					</div>
				</div>
			</div>

		</div>
	</div>

</div>
<script src="js/jquery-2.1.1.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/common.js"></script>
<script src="js/template.js"></script>


<script id="tpl" type="text/html">
  <%for(var i = 0; i < list.length; i++) {%>
		<li>
			<a href="chain-detail.htm?project_id=<%=list[i].projectId %>"  >
				<!-- 替换成 <%=list[i].projectLogo %>-->
				<img src='<%=list[i].projectLogo %>'  alt="">
				<p class="name"><%=list[i].projectName%></p>
			</a>
		</li>
  <%}%>
</script>

<script id="search" type="text/html">
	<%for(var i = 0; i < searchList.length; i++) {%>
		<div class="row search-result" style="display:none">
			<div class="search-result-img">
				<img src="img/coin_2.png" >
			</div>
			<div class="search-result-coin">
				<div class="">
					<a href="#" class="title"><%= searchList[i].projectName %></a>
				</div>
				<div class="">
					<p class="coin-description">
						<%= searchList[i].projectContent %>
					</p>
				</div>

			</div>
		</div>
	<%}%>
</script>

<script>

	// 首页列表
	$(function(){
		var page = 1;
		var uri = 'blockchain/quaryProjetList?currentPage=' + page + '&pageSize=8'
		doJavaGet(uri,function(result){
			var tpl = document.getElementById('tpl').innerHTML;
			var content = template(tpl, {list: result.datas});
			$('.coin-list-wrap').append(content)
		}, "json")
	})

	// search
	$(function () {
		var page = 1;
		$(".search-click-hook").on('click',function () {
			var key_word = $('.search_bar')[0].value
			var uri = 'blockchain/quaryProjetList?currentPage=' + page + '&pageSize=8' + '&projectName=' + key_word

			doJavaGet(uri,function(result){
				var search = document.getElementById('search').innerHTML;
				var content = template(search, {searchList: result.datas});
				// $('.search-result-box').html("");
				$('.search-result-box').append(content);
			}, "json");

			// 限制搜索结果描述的长度
			var descriptions = document.getElementsByClassName('coin-description');
			for (var i = 0; i < descriptions.length; i++) {
				if (descriptions[i].innerText.length > 220) {
					descriptions[i].innerText = descriptions[i].innerText.substring(0,220) + "..."
				}
			}
			// 点击搜索后隐藏分类和币种内容
			$('.coin-item').css('display','none')
			$('.coin-content').css('display','none')

			// TODO: 判断有结果时显示搜索结果

			$('.search-result').css('display','')

			// TODO: 判断无结果时显示提示信息
			$('.no-result').css('display','')

    })

		$(".loading-more").on('click',function () {
		    //点击ajax请求数据
				$(".loading-more").hide();
	        $(".loader1").css('display','flex');
				setTimeout(function () {
	        $(".loading-more").show();
	        $(".loader1").css('display','none');
	      },2000)
  	})

  })

	//分类查询
	$(function(){



	})


</script>
</body>

</html>
