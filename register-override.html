<!DOCTYPE html>

<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>彗星链库新建</title>
		<link rel="stylesheet" media="all" href="css/bootstrap.min.css">
		<link rel="stylesheet" media="all" href="css/bootstrap-datetimepicker.min.css" />
		<!--<link rel="stylesheet" href="css/common.css">-->
		<link rel="stylesheet" href="css/register.css" />
		<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css">
		<link rel="stylesheet" href="css/loading.css">
		
		<style type="text/css">
	       
    
		</style>
	</head>

	<body lang="zh-CN" class="reader-black-font">
		<div class="container">
			<header class="header_title">
				彗星
			</header>
			<form role="form" class="form-register" id="form-register1" action="">
				<div class="main">

					<h4 class="title">
								  <div class="normal-title">
								    <a class="active" href="login-overide.html">登录</a>
								    <b>·</b>
								    <a id="js-sign-up-btn" class="" href="">注册</a>
								  </div>
					</h4>
					<div class="js-sign-in-container">
						<form id="new_session" action="/sessions" accept-charset="UTF-8" method="post">

							<div class="input-prepend restyle ">
								<input placeholder="你的昵称" type="text" class="border_radT" name="userName" id="realName">
								<i class="fa fa-user"></i>

							</div>
							<div class="input-prepend">
								<input placeholder="手机号" type="text" name="tel" id="session_phone">
								<i class="fa fa-mobile"></i>
							</div>
							<!--<div class="input-prepend">
										<input placeholder="手机验证码" type="text"  name="tel" id="session_confirmPhone">
										<i class="fa fa-mobile" ></i>
										<a href=""></a>	
							</div>-->
							<div class="input-prepend">
								<input placeholder="设置密码" type="password" class="border_radB" name="pwd" id="session_password">
								<i class="fa fa-unlock-alt"></i>
							</div>

							<input class="sign-in-button" id="sign-in-form-submit-btn" type="submit">
							<span class="loader2 loader" id="load">
										<div></div>
									</span>
							</input>
							<!--<a class="sign-in-button" id="sign-in-form-submit-btn" type="submit">
								注册
							</a>-->
							<div class="register-anouceed">
								<p>点击"注册"即表示您同意并遵守彗星</p>
								<p>
									<a href="#">用户协议</a>和
									<a href="#">隐私协议</a>
								</p>
							</div>

						</form>
						<!-- 更多登录方式 -->
						<div class="more-sign">
							<h6>社交帐号直接注册</h6>
							<ul>
								<li>
									<img src="img/wechat.png" width="40px" />
								</li>
								<li>
									<a href="">其它</a>
								</li>
							</ul>
						</div>
					</div>
					
				</div>
				
			
			
			</form>
			
		</div>
		
		
		<script src="js/jquery-2.1.1.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<!--<script src="js/new-chain/nice-validator/jquery.validator.js?local=zh-CN"></script>-->
		<script src="js/common.js"></script>
		<script src="http://static.runoob.com/assets/jquery-validation-1.14.0/dist/jquery.validate.min.js"></script>
		<!--<script src="js/jquery-validate/jquery-validate.min.js"></script>-->
		<script src="js/plugins/layer/layer.js"></script>
		<script>
			$(function() {

				//验证手机号码输入格式
				jQuery.validator.addMethod("isMobile", function(value, element) {
					var length = value.length;
					var regPhone = /^1([3578]\d|4[57])\d{8}$/;
					return this.optional(element) || (length == 11 && regPhone.test(value));
				}, "请正确填写您的手机号码");

				$('#form-register1').validate({
					rules: {
						//    昵称
						userName: {　　
							required: true,
						},
						//   电话
						tel: {
							required: true,
							minlength: 11,
							isMobile: true

						},
						//   密码
						pwd: {
							required: true,
							minlength: 6
						},
					},
					messages: {
						//   用户名
						userName: {
							required: '请输入用户名',
						},
						//   用户名
						tel: {
							required: '请输入电话',
							minlength: "手机长度为11位",
							//                       isMobile:"请填写11位的手机号码!"
						},
						//   密码
						pwd: {
							required: '请输入密码',
							minlength: "密码长度不能小于 6 个字符"
						},
					},
					// 校验全部通过

					submitHandler: function() {
						
					},

				})
			})

			$("#sign-in-form-submit-btn").click(function() {

				var param = {
					userName: $("#session_phone").val(),
					realName: $("#realName").val(),
					userPwd: $("#session_password").val(),
					tel: $("#session_phone").val(),
					//					userType: 3,
				}

				var uri = 'news/registerUser'
				param = JSON.stringify(param)
				
				doPostJavaApi(uri, param, function(res) {
					
					if(res != null && res.code == 0) {
						$("#load").attr({
							style: "-webkit-animation:loader2 1s 0.23s linear infinite"
						});
						$("#load div").attr({
							style: "display:block"
						});
						setTimeout(function() { //两秒后跳转                                   
							location.href = "index.html";
						}, 1500);

					} else {
						
						layer.msg(res.msg);
						
					}

				}, "json");

			});
		</script>

	</body>

</html>